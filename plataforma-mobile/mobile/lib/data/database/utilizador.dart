import 'package:sqflite/sqflite.dart';

Future<void> createUtilizadorTable(Database db) async {
  await db.execute('''
    CREATE TABLE IF NOT EXISTS UTILIZADOR (
      ID_UTILIZADOR INTEGER PRIMARY KEY AUTOINCREMENT,
      NOME_UTILIZADOR TEXT NOT NULL,
      EMAIL TEXT NOT NULL,
      PASSWORD_UTIL TEXT NOT NULL,
      IMG_PERFIL TEXT,
      DATA_CRIACAO_UTILIZ TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,
      TELEMOVEL INTEGER,
      GENERO INTEGER,
      MORADA TEXT,
      PAIS TEXT,
      DATA_NASC TEXT,
      DATA_ATIV_UTILI TEXT,
      AUTEN2FAT INTEGER,
      ESTADO_UTILIZADOR INTEGER NOT NULL DEFAULT 1,
      ISFORMANDO INTEGER DEFAULT 1,
      ISFORMADOR INTEGER,
      ISGESTOR_ADMINISTRADOR INTEGER
    );
  ''');

  await db.execute('''
    CREATE TABLE IF NOT EXISTS FORMADORES (
      ID_FORMADOR INTEGER PRIMARY KEY,
      DESCRICAO_FORMADOR TEXT,
      FOREIGN KEY (ID_FORMADOR) REFERENCES UTILIZADOR(ID_UTILIZADOR)
    );
  ''');

  await db.execute('''
    CREATE TABLE IF NOT EXISTS FORMANDOS (
      ID_FORMANDO INTEGER PRIMARY KEY,
      FOREIGN KEY (ID_FORMANDO) REFERENCES UTILIZADOR(ID_UTILIZADOR)
    );
  ''');

  await db.execute('''
    CREATE TABLE IF NOT EXISTS GESTOR_ADMINISTRADOR (
      ID_GESTOR_ADMINISTRADOR INTEGER PRIMARY KEY,
      FOREIGN KEY (ID_GESTOR_ADMINISTRADOR) REFERENCES UTILIZADOR(ID_UTILIZADOR)
    );
  ''');
}
