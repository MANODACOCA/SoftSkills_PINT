import 'package:sqflite/sqflite.dart';

Future<void> createTrabalhosResultadosTables(Database db) async {
  await db.execute('''
    CREATE TABLE IF NOT EXISTS TRABALHOS (
      ID_TRABALHO INTEGER PRIMARY KEY AUTOINCREMENT,
      ID_CURSO_TR INTEGER NOT NULL,
      ID_FORMATO_TR INTEGER NOT NULL,
      NOME_TR TEXT NOT NULL,
      CAMINHO_TR TEXT NOT NULL,
      DESCRICAO_TR TEXT NOT NULL,
      DATA_ENTREGA_TR TEXT,
      FOREIGN KEY (ID_CURSO_TR) REFERENCES CURSOS(ID_CURSO),
      FOREIGN KEY (ID_FORMATO_TR) REFERENCES TIPO_FORMATO(ID_FORMATO)
    );
  ''');

  await db.execute('''
    CREATE TABLE IF NOT EXISTS RESULTADOS (
      ID_RESUL INTEGER PRIMARY KEY AUTOINCREMENT,
      ID_FORMANDO INTEGER NOT NULL,
      ID_CURSO_SINCRONO INTEGER NOT NULL,
      RESUL REAL NOT NULL,
      FOREIGN KEY (ID_CURSO_SINCRONO) REFERENCES SINCRONO(ID_CURSO_SINCRONO),
      FOREIGN KEY (ID_FORMANDO) REFERENCES FORMANDOS(ID_FORMANDO)
    );
  ''');

  await db.execute('''
    CREATE TABLE IF NOT EXISTS ENTREGA_TRABALHOS (
      ID_ENTREGA_TRABALHO INTEGER PRIMARY KEY AUTOINCREMENT,
      ID_TRABALHO_ET INTEGER NOT NULL,
      ID_FORMANDO_ET INTEGER NOT NULL,
      CAMINHO_ET TEXT NOT NULL,
      DATA_ENTREGA_ET TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (ID_FORMANDO_ET) REFERENCES FORMANDOS(ID_FORMANDO),
      FOREIGN KEY (ID_TRABALHO_ET) REFERENCES TRABALHOS(ID_TRABALHO)
    );
  ''');

  await db.execute('''
    CREATE TABLE IF NOT EXISTS AVALIACOES_ET (
      ID_AVALIACOES_AET INTEGER PRIMARY KEY AUTOINCREMENT,
      ID_ENTREGA_TRABALHO_AET INTEGER NOT NULL,
      AVALIACAO REAL NOT NULL,
      FOREIGN KEY (ID_ENTREGA_TRABALHO_AET) REFERENCES ENTREGA_TRABALHOS(ID_ENTREGA_TRABALHO)
    );
  ''');
}
